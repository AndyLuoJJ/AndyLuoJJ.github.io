<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Swift Package Manager - Swiftè‡ªå¸¦çš„åŒ…ç®¡ç†å™¨ | Andyçš„å°ä¹¦æ¶</title>
<meta name="description" content="è¿™æ˜¯æˆ‘çš„ä¸ªäººåšå®¢ï¼Œå¸Œæœ›èƒ½å¤ŸåšæŒå†™ä¸€ä¸‹è‡ªå·±å„æ–¹é¢çš„å¿ƒå¾—ğŸ˜ƒ" />
<link rel="shortcut icon" href="https://AndyLuoJJ.github.io/favicon.ico?v=1584064332558">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://AndyLuoJJ.github.io/styles/main.css">

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://AndyLuoJJ.github.io">
  <img class="avatar" src="https://AndyLuoJJ.github.io/images/avatar.png?v=1584064332558" alt="">
  </a>
  <h1 class="site-title">
    Andyçš„å°ä¹¦æ¶
  </h1>
  <p class="site-description">
    è¿™æ˜¯æˆ‘çš„ä¸ªäººåšå®¢ï¼Œå¸Œæœ›èƒ½å¤ŸåšæŒå†™ä¸€ä¸‹è‡ªå·±å„æ–¹é¢çš„å¿ƒå¾—ğŸ˜ƒ
  </p>
  <div class="menu-container">
    
      
        <a href="https://AndyLuoJJ.github.io" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="https://AndyLuoJJ.github.io/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="https://AndyLuoJJ.github.io/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="https://AndyLuoJJ.github.io/post/about/" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Swift Package Manager - Swiftè‡ªå¸¦çš„åŒ…ç®¡ç†å™¨
            </h2>
            <div class="post-info">
              <span>
                2019-09-13
              </span>
              <span>
                11 min read
              </span>
              
                <a href="https://AndyLuoJJ.github.io/tag/-nEqPv3Bc/" class="post-tag">
                  # Swift
                </a>
              
                <a href="https://AndyLuoJJ.github.io/tag/UO8lAU8F3/" class="post-tag">
                  # å·¥å…·
                </a>
              
            </div>
            
              <img class="post-feature-image" src="https://developer.apple.com/swift/images/swift-og.png" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <p>WWDC19 ä¸º Swift å¸¦æ¥äº†æ–°çš„æ´»åŠ› - Swift Package Manager å°†ä¿ƒä½¿ Swift å‘å…¶ä»–é¢†åŸŸçš„å‘å±•è¿ˆå‡ºé‡è¦çš„ä¸€æ­¥ã€‚</p>
<!-- more -->
<p>ä¸ºäº†èƒ½å¤Ÿæ›´æ–¹ä¾¿åœ°é€šè¿‡ Swift åˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶åŠç¬¬ä¸‰æ–¹åº“ï¼ŒApple æä¾›äº† Swift Package Manager æ¥å¸®åŠ©å¼€å‘äººå‘˜ç®¡ç†é¡¹ç›®ï¼Œä»¥ä¾¿å¤ç”¨ä»£ç åŠç®€åŒ–ç®¡ç†æµç¨‹ã€‚</p>
<h3 id="ç›¸å…³æ¦‚å¿µ">ç›¸å…³æ¦‚å¿µ</h3>
<h4 id="package">Package</h4>
<p>Package åŒ…å«ä¸€ç³»åˆ—çš„ Swift æºæ–‡ä»¶å’Œä¸€ä¸ªåä¸º<code>Package.swift</code>çš„é…ç½®æ–‡ä»¶ã€‚é…ç½®æ–‡ä»¶ä¸­å®šä¹‰äº†Package çš„åç§°å’Œå†…å®¹ã€‚ä¸€ä¸ª Package å¯ä»¥äº§ç”Ÿå¤šä¸ª targetï¼Œè€Œæ¯ä¸ª target å”¯ä¸€å¯¹åº”ä¸€ä¸ª product åŠä¸€ä¸ªæˆ–ä»¥ä¸Šçš„ dependencyã€‚</p>
<p>Target æ˜¯ Package äº§ç”Ÿçš„ç›®æ ‡ï¼Œä¸€ä¸ª Package å¯ä»¥æœ‰å¤šä¸ªç›®æ ‡ã€‚æ¯ä¸ª Target éƒ½äº§ç”Ÿä¸€ä¸ªè¾“å‡ºï¼Œè¿™ä¸ªè¾“å‡ºå¯ä»¥æ˜¯ç©ºçš„ã€å¯æ‰§è¡Œæ–‡ä»¶ã€åº“ã€ç³»ç»Ÿæ¨¡å—ï¼Œå¹¶ä¸”æ¯ä¸ª target éƒ½å¯ä»¥æ˜¯åŸºäºå…¶ä»–çš„åº“è¿›è¡Œå¼€å‘çš„ï¼Œè¿™äº›åº“å°±ç§°ä¸ºè¿™ä¸ªtarget çš„ä¾èµ–ï¼ˆdependencyï¼‰ã€‚</p>
<h4 id="module">Module</h4>
<p>Swift å°† Package ä¸­çš„æ–‡ä»¶ä»¥ moduleï¼ˆæ¨¡å—ï¼‰çš„å½¢å¼è¿›è¡Œç®¡ç†ï¼Œæ¯ä¸€ä¸ª module éƒ½è§„å®šäº†ä¸€ä¸ªå‘½åç©ºé—´ï¼ˆnamespaceï¼‰ï¼Œå¹¶ä¸”é€šè¿‡è®¿é—®æ§åˆ¶ç¬¦ï¼Œå¯ä»¥æ§åˆ¶ module å†…éƒ¨çš„ä»£ç æ˜¯å¦å¯ä»¥è¢« module å¤–çš„ä»£ç æ‰€è®¿é—®ã€‚</p>
<p>æ¯ä¸€ä¸ªå·¥ç¨‹éƒ½å¯ä»¥å°†å®ƒéœ€è¦ç”¨åˆ°çš„ä»£ç å…¨éƒ¨åŒ…å«åˆ°ä¸€ä¸ª module ä¸­ï¼Œä¹Ÿå¯ä»¥å°†å…¶ä»–çš„ module å¯¼å…¥ï¼ˆimportï¼‰è¿›æ¥ï¼Œä½œä¸ºè‡ªå·±çš„ä¾èµ–ï¼ˆdependencyï¼‰ã€‚<strong>æ³¨æ„ target çš„ä¾èµ–å’Œå·¥ç¨‹çš„ä¾èµ–ç¨æœ‰ä¸åŒï¼Œæ‰€æœ‰ target çš„ä¾èµ–æ„æˆçš„é›†åˆæ‰æ˜¯å·¥ç¨‹çš„ä¾èµ–ã€‚</strong></p>
<p>é€šè¿‡å°†èƒ½å¤Ÿè§£å†³æŸä¸€ç‰¹å®šç±»å‹çš„é—®é¢˜çš„ä»£ç å°è£…æˆä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ï¼Œå¯ä»¥ä½¿ä»£ç å¤ç”¨åˆ°å…¶ä»–åœºæ™¯ä¸­ã€‚ä¾‹å¦‚ï¼Œç”¨äºè§£æJSONæ•°æ®çš„æ¨¡å—å¯ä»¥ç”¨åˆ°æ‰€æœ‰éœ€è¦ä¸ç½‘ç»œæ•°æ®æ‰“äº¤é“çš„é¡¹ç›®ä¸­ï¼Œè¿™æ ·å°±ä¸éœ€è¦é‡æ–°è‡ªå·±å†™ç›¸åº”åŠŸèƒ½çš„ä»£ç äº†ã€‚<strong>å¯¹è¿™ç±»ä»£ç çš„è¦æ±‚æ˜¯å¿…é¡»ç‹¬ç«‹äºé¡¹ç›®ä¹‹å¤–ï¼Œå…·æœ‰ç±»ä¼¼äºå‡½æ•°çš„ç‰¹æ€§ã€‚</strong></p>
<p>SPM å…è®¸æˆ‘ä»¬ä»æœ¬åœ°æˆ–è€…ç½‘ç»œä¸Šè·å–åˆ°æˆ‘ä»¬æ‰€éœ€è¦çš„å…¶ä»–ç¬¬ä¸‰æ–¹ moduleã€‚</p>
<h4 id="library">Library</h4>
<p>Library ç±»ä¼¼äºå¼€å‘ä¸­çš„åº“ï¼Œå³å·¥ç¨‹æœ¬èº«ä¸äº§ç”Ÿå¯æ‰§è¡Œæ–‡ä»¶ï¼Œè€Œæ˜¯ä½œç”¨ä¸€ä¸ªé€šç”¨çš„åŠŸèƒ½æ¨¡å—ï¼Œå¯ä»¥è¢«å¯¼å…¥åˆ°å…¶ä»–é¡¹ç›®ä¸­å‘æŒ¥ä½œç”¨ã€‚</p>
<h4 id="dependency">Dependency</h4>
<p>å¦‚æœæƒ³è¦èƒ½å¤Ÿå¤ç”¨ä»£ç ï¼Œå°±éœ€è¦æŒ‡å®šè‡ªå·±çš„å·¥ç¨‹<em>ä¾èµ–</em>äºå“ªäº›å¤–éƒ¨çš„ä»£ç ï¼Œå› ä¸ºè‡ªå·±çš„å·¥ç¨‹èƒ½å¦æ­£å¸¸è¿è¡Œå–å†³äºè¿™äº›å¤–éƒ¨ä»£ç æ˜¯å¦æ­£å¸¸å·¥ä½œï¼Œå› æ­¤è¿™äº›å¤–éƒ¨ä»£ç ä¹Ÿè¢«ç§°ä¸ºä¾èµ–ï¼ˆdependencyï¼‰ã€‚</p>
<h3 id="ç®€å•ä½¿ç”¨æ–¹æ³•">ç®€å•ä½¿ç”¨æ–¹æ³•</h3>
<p>ä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹SPMçš„ä½¿ç”¨æ–¹æ³•ã€‚</p>
<h4 id="åˆ›å»ºé¡¹ç›®">åˆ›å»ºé¡¹ç›®</h4>
<p>åœ¨éœ€è¦åˆ›å»ºé¡¹ç›®çš„ç›®å½•ä¸­æ‰§è¡Œ<code>swift package init</code>ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„ Swift é¡¹ç›®ã€‚</p>
<pre><code>$ mkdir testProgram
$ cd testProgram
$ swift package init (--type library/executable/empty/system module)
</code></pre>
<p>typeå¯ä»¥æœ‰å››ç§ç±»å‹ï¼š</p>
<ul>
<li>library: åˆ›å»ºåº“</li>
<li>executable: åˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶</li>
<li>empty:åˆ›å»ºç©ºé¡¹ç›®</li>
<li>system module:åˆ›å»ºç³»ç»Ÿæ¨¡å—é¡¹ç›®<br>
é»˜è®¤åˆ›å»ºçš„æ˜¯libraryã€‚</li>
</ul>
<p>å¦å¤–ï¼Œåœ¨åˆ›å»ºå¥½é¡¹ç›®åï¼Œä¸ºäº†èƒ½å¤Ÿå……åˆ†å‘æŒ¥Xcodeå¼ºå¤§çš„åŠŸèƒ½ï¼Œè¿˜å¯ä»¥ç”Ÿæˆ Xcode project ä»¥ä¾¿åœ¨ Xcode ä¸­ç¼–è¾‘ã€è°ƒè¯•ä»£ç ã€‚cd åˆ°é¡¹ç›®ç›®å½•åï¼Œæ‰§è¡Œ<code>swift package generate-xcodeproj</code>å°±å¯ä»¥åˆ›å»ºå¯¹åº”çš„ Xcode project äº†ã€‚</p>
<blockquote>
<p>ç›®å‰åªèƒ½åœ¨ Xcode ä¸­å®ç°ä»£ç ç¼–è¾‘ï¼Œæš‚æ—¶æ²¡æœ‰æ‰¾åˆ°èƒ½å¤Ÿå……åˆ†å‘æŒ¥ Xcode åŠŸèƒ½çš„åŠæ³•ï¼Œç¼–è¯‘å’Œè¿è¡Œéƒ½éœ€è¦å›åˆ° Terminal è¿›è¡Œã€‚</p>
</blockquote>
<h4 id="æ·»åŠ å¤–éƒ¨æ¨¡å—">æ·»åŠ å¤–éƒ¨æ¨¡å—</h4>
<p>å¦‚å‰æ‰€è¿°ï¼Œ<code>Package.swift</code>æ˜¯é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œæ¨¡ç‰ˆä»£ç å¦‚ä¸‹ã€‚</p>
<pre><code class="language-swift">// swift-tools-version:4.2
// The swift-tools-version declares the minimum version of Swift required to build this package.

import PackageDescription

let package = Package(
    name: &quot;testProgram&quot;,
    products: [
        // Products define the executables and libraries produced by a package, and make them visible to other packages.
        // A package can produce multiple executables and libraries.
        .library(
            name: &quot;testProgram&quot;,
            targets: [&quot;testProgram&quot;]),
        .executable(
            name: &quot;MainExecutable&quot;,
            targets: [&quot;MainExecutable&quot;])
    ],
    dependencies: [
        // Dependencies declare other packages that this package depends on.
        // .package(url: /* package url */, from: &quot;1.0.0&quot;),
    ],
    targets: [
        // Targets are the basic building blocks of a package. A target can define a module or a test suite, and of course an executable.
        // Targets can depend on other targets in this package, and on products in packages which this package depends on.
        .target(
            name: &quot;testProgram&quot;,
            dependencies: []),
        .testTarget(
            name: &quot;testProgramTests&quot;,
            dependencies: [&quot;testProgram&quot;]),
    ]
)

</code></pre>
<p>è¯¥æ¨¡ç‰ˆä»£ç åˆ›å»ºäº†ä¸€ä¸ªPackageå®ä¾‹ï¼Œå¹¶é€šè¿‡æ„é€ å‚æ•°æ¥æŒ‡å®šé¡¹ç›®çš„nameã€productã€targetå’Œdependencyã€‚å„å­—æ®µä½œç”¨å¦‚ä¸‹ï¼š</p>
<ul>
<li>name:æŒ‡å®šé¡¹ç›®åç§°</li>
<li>products:æŒ‡å®šé¡¹ç›®ç”Ÿæˆçš„ä¸œè¥¿ï¼Œå¯ä»¥æ˜¯libraryæˆ–è€…executableï¼ŒåŒä¸€ä¸ªé¡¹ç›®å¯ä»¥ç”Ÿæˆå¤šä¸ªlibraryæˆ–executableã€‚</li>
<li>dependencies: æŒ‡å®šé¡¹ç›®æ‰€ä½¿ç”¨çš„ä¾èµ–åº“åŠå…¶URLã€ç‰ˆæœ¬ç­‰ä¿¡æ¯ã€‚</li>
<li>targets:æŒ‡å®šé¡¹ç›®ç”Ÿæˆçš„ç›®æ ‡ï¼Œ</li>
</ul>
<p>è‹¥è¦æ·»åŠ å¼€æºä»£ç ï¼Œåœ¨.dependencyä¸­æ·»åŠ ï¼š</p>
<pre><code class="language-swift">.package(url: &quot;open source url&quot;, from: &quot;version number&quot;)
</code></pre>
<p>è‹¥è¦æ·»åŠ æœ¬åœ°ä¾èµ–ï¼Œåœ¨.dependencyä¸­æ·»åŠ ï¼š</p>
<pre><code class="language-swift">.package(path:&quot;local path&quot;)
</code></pre>
<p>å¯ä»¥æ·»åŠ å¤šä¸ªä¾èµ–ï¼Œå¹¶ä¸”ç”¨ä¸Šè¿°ç±»ä¼¼çš„æ–¹æ³•è¿˜å¯ä»¥åˆ›å»ºå¤šä¸ªproductså’Œtargetsã€‚</p>
<p>ç„¶ååœ¨äº§ç”Ÿçš„targetsä¸­ï¼ŒæŒ‡å®šå¯¹åº”çš„dependencyçš„åç§°å°±å¯ä»¥äº†ã€‚</p>
<h4 id="å‘å¸ƒlibrary">å‘å¸ƒlibrary</h4>
<p>ä½¿ç”¨Gitå°†è‡ªå·±åˆ›å»ºå¥½çš„libraryå‘å¸ƒåˆ°æ‰˜ç®¡ä»“åº“ä¸­ã€‚</p>
<pre><code>$ git init  // create a new git project
$ git add . // add all files to the stack
$ git remote add origin [github-URL] // add a remote origin in the remote repository
$ git commit -m &quot;Initial Commit&quot; // commit all files in the stack to local repository
$ git tag 1.0.0 // tag the branch
$ git push origin master --tags // push local repository to remote repository
</code></pre>
<p>tagæ ‡è®°çš„ç‰ˆæœ¬å·å°±æ˜¯å…¶ä»–é¡¹ç›®å°†æœ¬é¡¹ç›®ä½œä¸ºä¾èµ–æ—¶å¼•ç”¨çš„ç‰ˆæœ¬å·ï¼ˆfromï¼‰ã€‚å¯¹äºæœ¬åœ°ä¾èµ–ï¼Œè™½ç„¶å¯ä»¥å€ŸåŠ©gitçš„æœ¬åœ°ä»“åº“å›æº¯åŠŸèƒ½è¿›è¡Œä»£ç ç®¡ç†ï¼Œä½†æ˜¯åœ¨Swift Package Managerä¸­æš‚æ—¶ä¸æ”¯æŒå¼•ç”¨æœ¬åœ°ä¾èµ–çš„ç‰ˆæœ¬å·ã€‚</p>
<h4 id="æ›´æ–°ä¾èµ–åŒ…">æ›´æ–°ä¾èµ–åŒ…</h4>
<p>ç¼–è¾‘<code>Package.swift</code>ä¸­ä¾èµ–åŒ…çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œç„¶åæ‰§è¡Œ<code>swift package update</code>å³å¯æ›´æ–°éœ€è¦çš„ä¾èµ–åŒ…ã€‚</p>
<h4 id="åˆ›å»ºæ¨¡å—">åˆ›å»ºæ¨¡å—</h4>
<p>åªéœ€è¦å°†<code>Package.swift</code>ä¸­çš„productsæ·»åŠ .libraryå°±å¯ä»¥åˆ›å»ºæ¨¡å—äº†ã€‚æ¯ä¸€ä¸ªPackageå¯ä»¥äº§ç”Ÿå¤šä¸ªlibraryï¼Œä¸åŒçš„libraryåœ¨Sourcesç›®å½•ä¸‹ä»¥ä¸åŒåç§°çš„ç›®å½•å‘ˆç°ã€‚</p>
<p>å¦‚æœç”Ÿæˆçš„libraryä¹‹é—´æœ‰ç›¸äº’å…³è”ï¼Œåˆ™éœ€è¦åœ¨å®Œæˆä¸€ä¸ªlibraryçš„ç¼–ç å·¥ä½œåï¼Œå…ˆæ‰§è¡Œ<code>swift build</code>å¯¹å·²æœ‰çš„libraryè¿›è¡Œç¼–è¯‘ï¼Œç„¶åå†è¿›è¡Œä¸‹ä¸€ä¸ªlibraryçš„ç¼–ç å·¥ä½œã€‚è¿™æœ‰åŠ©äºä»¥æ¨¡å—åŒ–çš„æ–¹å¼å®Œæˆlibraryçš„åˆ›å»ºã€‚</p>
<p>æ³¨æ„ï¼šå¯¹äºä½¿ç”¨Gitå¼€æºçš„ä»£ç ï¼Œéœ€è¦æ‰“ä¸Šgit tagï¼Œåˆ«äººæ‰èƒ½å¤Ÿå¯¼å…¥å¯¹åº”ç‰ˆæœ¬çš„ä»£ç ã€‚åŒæ ·åœ°ï¼Œå¯¹äºæœ¬åœ°ä¾èµ–ï¼Œæœ€å¥½ä¹ŸåŠ ä¸Šgit tagï¼Œä½†æ˜¯åº”è¯¥ä¸æ˜¯å¿…é¡»çš„ã€‚</p>
<h3 id="å®ä¾‹ç»“åˆä½¿ç”¨swift-for-tensorflowå’Œswift-package-manager">å®ä¾‹â€”â€”ç»“åˆä½¿ç”¨Swift for TensorFlowå’ŒSwift Package Manager</h3>
<p>ä¸ºäº†èƒ½å¤ŸåŒæ—¶ä½¿ç”¨Swift for TensorFlowå’ŒSwift Package Managerè¿›è¡ŒSwiftæœºå™¨å­¦ä¹ é¡¹ç›®çš„ç®¡ç†ï¼ˆä¸ªäººè®¤ä¸ºè¿™æ˜¯æ¯”è¾ƒé€šç”¨çš„æ–¹æ³•ï¼‰ï¼Œéœ€è¦å…ˆæŒ‡å®šswiftè·¯å¾„ä¸ºSFTçš„è·¯å¾„ï¼Œç„¶åä½¿ç”¨SPMå¯¹é¡¹ç›®è¿›è¡Œç¼–è¯‘ã€è¿è¡Œç­‰å¤„ç†ã€‚ä¸‹é¢macOSä¸Šçš„SFTå’ŒSPMä¸ºä¾‹ä»‹ç»å¦‚ä½•ç»“åˆä½¿ç”¨ä¸¤è€…ã€‚</p>
<ol>
<li>æŒ‡å®šswiftè·¯å¾„<br>
åœ¨<code>$PATH</code>ä¸­æŒ‡å®šswiftçš„è·¯å¾„ã€‚ç”±äºä½¿ç”¨äº†Swift for TensorFLowï¼Œå› æ­¤éœ€è¦åˆ°GitHubä»“åº“ä¸­ä¸‹è½½å¯¹åº”çš„swift toolchainï¼Œé“¾æ¥<a href="https://github.com/tensorflow/swift">åœ¨è¿™é‡Œ</a>ã€‚è¯¥swift toolchainä¸­åŒ…å«äº†å®Œæ•´çš„swiftç¼–è¯‘å™¨ï¼Œä¸Xcodeè‡ªå¸¦çš„toolchainç›¸æ¯”å¤šäº†èƒ½å¤Ÿä½¿ç”¨TensorFlowçš„åŠŸèƒ½ã€‚</li>
</ol>
<blockquote>
<p>å¦‚æœåœ¨Linuxä¸‹è¿›è¡Œå¼€å‘ï¼Œè¿˜éœ€è¦äº‹å…ˆé…ç½®å¥½swiftçš„ç¯å¢ƒï¼Œå…·ä½“æ•™ç¨‹<a href="https://swift.org/getting-started/">è§è¿™é‡Œ</a>ã€‚</p>
</blockquote>
<ol start="2">
<li>åˆ›å»ºmodelå¯¹åº”çš„library<br>
ç”±äºæœºå™¨å­¦ä¹ æ¨¡å‹æ˜¯æ¯”è¾ƒç‹¬ç«‹çš„éƒ¨åˆ†ï¼Œå› æ­¤æœ€å¥½å°†å…¶ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„moduleï¼Œç„¶åå°†å…¶å¯¼å…¥åˆ°å…¶ä»–é¡¹ç›®ä¸­å»ã€‚æ¥ä¸‹æ¥è¦åšçš„åˆ›å»ºML modelå¯¹åº”çš„libraryã€‚</li>
</ol>
<p>ç”±äºä¾‹å­ä¸­MLModelæ²¡æœ‰ä½¿ç”¨åˆ°ç¬¬ä¸‰æ–¹åº“ï¼Œå› æ­¤é…ç½®æ–‡ä»¶ä¸éœ€è¦ä¿®æ”¹ã€‚åœ¨<code>./Sources/name</code>ä¸­å°±åŒ…å«äº†ä¸€ä¸ªæœ¬åœ°moduleï¼Œä¿®æ”¹ä»£ç ä¸º:</p>
<pre><code class="language-swift">import TensorFlow

struct MLPClassifier {
    var w1 = Tensor&lt;Float&gt;(shape: [2, 4], repeating: 0.1)
    var w2 = Tensor&lt;Float&gt;(shape: [4, 1], scalars: [0.4, -0.5, -0.5, 0.4])
    var b1 = Tensor&lt;Float&gt;([0.2, -0.3, -0.3, 0.2])
    var b2 = Tensor&lt;Float&gt;([[0.4]])

    func prediction(`for` x: Tensor&lt;Float&gt;) -&gt; Tensor&lt;Float&gt; {
        let o1 = tanh(matmul(x, w1) + b1)
        return tanh(matmul(o1, w2) + b2)
    }
}
</code></pre>
<p>è¿™é‡Œç”¨ä¸€ä¸ªç®€å•çš„MLPæ¨¡å‹ä½œä¸ºä¾‹å­è¿›è¡Œå±•ç¤ºï¼Œè‡ªå®šä¹‰äº†ä¸€ä¸ªMLPClassifierdçš„ç±»ï¼Œå®šä¹‰äº†ç¬¬ä¸€å±‚åŠç¬¬äºŒå±‚çš„æƒé‡å’Œbiasï¼Œç„¶åä½¿ç”¨tanhä½œä¸ºactivation functionï¼Œå¾—åˆ°â€œç½‘ç»œâ€è¾“å‡ºçš„ç»“æœã€‚<br>
é€šè¿‡ä¸Šè¿°ä»£ç å°±å®Œæˆäº†ML modelçš„åˆ›å»ºï¼Œå¯ä»¥è¿è¡Œswift buildçœ‹çœ‹æœ‰æ²¡æœ‰é—®é¢˜ã€‚</p>
<blockquote>
<p>ä¸ºäº†åŠ é€Ÿæ¨¡å‹çš„è®¡ç®—ï¼Œä¼šæœ‰warningè¯´æ²¡æœ‰ç”¨optimizationç¼–è¯‘ã€‚å¯¹äºå°ç½‘ç»œæ¥è¯´å½±å“ä¸å¤§ï¼Œä½†å¦‚æœç½‘ç»œç»“æ„æ¯”è¾ƒå¤æ‚çš„æ—¶å€™å¯èƒ½ä¼šå¯¼è‡´è®­ç»ƒè¿‡æ…¢ã€‚æš‚æ—¶å¥½åƒæ²¡æœ‰ä»€ä¹ˆåŠæ³•ï¼Œå”¯ä¸€æƒ³åˆ°çš„è§£å†³æ–¹æ¡ˆæ˜¯åœ¨releaseæ¨¡å¼ä¸‹ç¼–è¯‘ï¼Œå³<code>swift build -c release</code>ï¼Œreleaseæ¨¡å¼é»˜è®¤ä½¿ç”¨-Oè¿›è¡Œç¼–è¯‘ã€‚</p>
</blockquote>
<ol start="3">
<li>åˆ›å»ºswifté¡¹ç›®<br>
æ¥ä¸‹æ¥åˆ›å»ºä½¿ç”¨å‰é¢å»ºç«‹å¥½çš„moduleçš„swifté¡¹ç›®ã€‚æ–°å»ºä¸€ä¸ªexecutableçš„é¡¹ç›®ï¼Œå¹¶åœ¨Package.swiftä¸­æ·»åŠ æœ¬åœ°ä¾èµ–MLModelå’Œç”¨äºæµ‹è¯•çš„ç¬¬ä¸‰æ–¹åº“SwiftyJSONã€‚</li>
</ol>
<p>æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="language-swift">import TensorFlow
import MLModel

let input = Tensor&lt;Float&gt;([[0.2, 0.8]])
let classifier = MLPClassifier()
let prediction = classifier.prediction(for: input)
print(prediction)
</code></pre>
<p>âš ï¸ï¼šSwiftyJSONè¦æ±‚toolchainç‰ˆæœ¬åœ¨4ä»¥ä¸Šï¼Œè€ŒSwift for TensorFlowçš„toolchainç‰ˆæœ¬ä¸º3ï¼Œå› æ­¤æš‚æ—¶æ²¡æœ‰åŠæ³•åŒæ—¶ä½¿ç”¨è¿™ä¸¤ä¸ªæ¡†æ¶ã€‚</p>
<ol start="4">
<li>ç¼–è¯‘è¿è¡Œ<br>
å°è¯•è¿›è¡Œç¼–è¯‘è¿è¡Œã€‚å¯ä»¥åˆ†åˆ«æ‰§è¡Œç¼–è¯‘å’Œè¿è¡Œä¸¤ä¸ªæ­¥éª¤ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è¿è¡Œè§‚å¯Ÿä»£ç è¿è¡Œç»“æœã€‚<br>
ç¼–è¯‘é¡¹ç›®ï¼š</li>
</ol>
<pre><code>swift build
</code></pre>
<p>é»˜è®¤çš„ç¼–è¯‘ç¯å¢ƒæ˜¯<code>debug</code>ï¼Œå¯é€šè¿‡<code>-c release</code>çš„æ ‡è®°ï¼Œå°†ç¼–è¯‘ç¯å¢ƒåˆ‡æ¢åˆ°<code>release</code>ã€‚debugæ¨¡å¼é»˜è®¤ä¸å¼€å¯-Oä¼˜åŒ–ï¼Œå› æ­¤ä¸ºäº†ä½¿Swift for TensorFlowè·å¾—æœ€ä½³æ€§èƒ½ï¼Œå»ºè®®å…ˆåœ¨releaseæ¨¡å¼ä¸‹ç¼–è¯‘é¡¹ç›®ï¼Œå†åˆ°æŒ‡å®šç›®å½•æ‰§è¡Œlinkç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p>
<p>è¿è¡Œé¡¹ç›®ï¼š</p>
<pre><code>swift run (executable name)
</code></pre>
<p>ä¹Ÿå¯ä»¥æ‰¾åˆ°buildç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œç„¶åç›´æ¥æ‰§è¡Œã€‚</p>
<blockquote>
<p>å¦‚æœé¡¹ç›®ä¸­å­˜åœ¨å¤šä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œéœ€è¦åœ¨<code>swift run</code>å‘½ä»¤åå¢åŠ å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶çš„åç§°ã€‚åˆ©ç”¨è¿™ä¸€ç‰¹æ€§å¯ä»¥å°†å¤šä¸ªç‹¬ç«‹çš„å·¥ç¨‹æ±‡æ€»åœ¨ä¸€ä¸ªpackageä¸‹é¢ï¼Œä¾¿äºç®¡ç†ï¼Œä½†æ˜¯ä¸€ä¸ªä¸å¥½çš„åœ°æ–¹æ˜¯å¦‚æœä¿®æ”¹äº†ä¸€ä¸ªåœ°æ–¹å°±å¿…é¡»æŠŠå½“å‰packageä¸‹çš„æ‰€æœ‰swiftæºæ–‡ä»¶ç¼–è¯‘ä¸€éã€‚ç›®å‰çš„è§£å†³æ–¹æ³•æ˜¯å½“packageè§„æ¨¡æ‰©å¤§åï¼Œå°†å…¶ä¸­ä¸€éƒ¨åˆ†ç›¸å¯¹ç‹¬ç«‹çš„åŠŸèƒ½æ‰“åŒ…æˆæ–°çš„swift packageï¼Œç„¶åå¯¼å…¥è¿›æ¥ï¼Œè¿™æ ·å°±ä¸ç”¨é‡æ–°ç¼–è¯‘å¯¼å…¥è¿›æ¥çš„æºç äº†ã€‚</p>
</blockquote>
<hr>
<p>æœ¬æ–‡ä¸ºåŸåˆ›æ–‡ç« ï¼Œè½¬è½½è¯·æ³¨æ˜ã€‚</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li><a href="#%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5">ç›¸å…³æ¦‚å¿µ</a>
<ul>
<li><a href="#package">Package</a></li>
<li><a href="#module">Module</a></li>
<li><a href="#library">Library</a></li>
<li><a href="#dependency">Dependency</a></li>
</ul>
</li>
<li><a href="#%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95">ç®€å•ä½¿ç”¨æ–¹æ³•</a>
<ul>
<li><a href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE">åˆ›å»ºé¡¹ç›®</a></li>
<li><a href="#%E6%B7%BB%E5%8A%A0%E5%A4%96%E9%83%A8%E6%A8%A1%E5%9D%97">æ·»åŠ å¤–éƒ¨æ¨¡å—</a></li>
<li><a href="#%E5%8F%91%E5%B8%83library">å‘å¸ƒlibrary</a></li>
<li><a href="#%E6%9B%B4%E6%96%B0%E4%BE%9D%E8%B5%96%E5%8C%85">æ›´æ–°ä¾èµ–åŒ…</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%9D%97">åˆ›å»ºæ¨¡å—</a></li>
</ul>
</li>
<li><a href="#%E5%AE%9E%E4%BE%8B%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8swift-for-tensorflow%E5%92%8Cswift-package-manager">å®ä¾‹â€”â€”ç»“åˆä½¿ç”¨Swift for TensorFlowå’ŒSwift Package Manager</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://AndyLuoJJ.github.io/post/homebrew-macos-shang-wan-mei-de-bao-guan-li-qi/">
              <h3 class="post-title">
                Homebrew - macOS ä¸Šå®Œç¾çš„åŒ…ç®¡ç†å™¨
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  Supported by UPYUN. | 
  <a class="rss" href="https://AndyLuoJJ.github.io/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()

  let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

  // This should probably be throttled.
  // Especially because it triggers during smooth scrolling.
  // https://lodash.com/docs/4.17.10#throttle
  // You could do like...
  // window.addEventListener("scroll", () => {
  //    _.throttle(doThatStuff, 100);
  // });
  // Only not doing it here to keep this Pen dependency-free.

  window.addEventListener("scroll", event => {
    let fromTop = window.scrollY;

    mainNavLinks.forEach((link, index) => {
      let section = document.getElementById(decodeURI(link.hash).substring(1));
      let nextSection = null
      if (mainNavLinks[index + 1]) {
        nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
      }
      console.log('section.offsetHeight', section.offsetHeight);
      if (section.offsetTop <= fromTop) {
        if (nextSection) {
          if (nextSection.offsetTop > fromTop) {
            link.classList.add("current");
          } else {
            link.classList.remove("current");    
          }
        } else {
          link.classList.add("current");
        }
      } else {
        link.classList.remove("current");
      }
    });
  });

</script>

      </div>
    </div>
  </body>
</html>
